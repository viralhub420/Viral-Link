<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viral Movie Hub</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src='//libtl.com/sdk.js' data-zone='10500197' data-sdk='show_10500197'></script>

    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #000; color: white; text-align: center; margin: 0; padding: 15px; }
        .header { background: #e50914; padding: 15px; border-radius: 0 0 15px 15px; font-weight: bold; font-size: 20px; margin-bottom: 20px; box-shadow: 0 0 15px #e50914; }
        #movie-list { display: flex; flex-direction: column; gap: 20px; }
        .movie-card { background: #1a1a1a; border: 1px solid #333; border-radius: 12px; overflow: hidden; padding-bottom: 10px; }
        .movie-card img { width: 100%; height: auto; max-height: 220px; object-fit: cover; }
        .movie-card h3 { font-size: 18px; margin: 10px; }
        .btn { background: #e50914; color: white; border: none; padding: 12px; border-radius: 8px; font-weight: bold; width: 90%; cursor: pointer; text-transform: uppercase; }
        .loading { font-size: 18px; color: gold; margin-top: 50px; }
    </style>
</head>
<body>

    <div class="header">üé¨ Viral Movie Hub App</div>

    <div id="movie-list">
        <div class="loading">‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßÅ‡¶≠‡¶ø‡¶ó‡ßÅ‡¶≤‡ßã ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();

        // ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®
        const firebaseConfig = { databaseURL: "https://viralmoviehubbd-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // ‡¶´‡¶æ‡ßü‡¶æ‡¶∞‡¶¨‡ßá‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶Æ‡ßÅ‡¶≠‡¶ø ‡¶°‡ßá‡¶ü‡¶æ ‡¶™‡ßú‡¶æ (‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶≤‡¶ü‡¶æ‡¶á‡¶Æ)
        db.ref('movies').on('value', (snapshot) => {
            const list = document.getElementById('movie-list');
            list.innerHTML = ''; // ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶æ
            
            if (snapshot.exists()) {
                snapshot.forEach((childSnapshot) => {
                    const movie = childSnapshot.val();
                    list.innerHTML += `
                        <div class="movie-card">
                            <img src="${movie.img}" alt="${movie.name}">
                            <h3>${movie.name}</h3>
                            <button class="btn" onclick="window.location.href='${movie.url}'">Watch Now</button>
                        </div>`;
                });
            } else {
                list.innerHTML = '<p>‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶®‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶Æ‡ßÅ‡¶≠‡¶ø ‡¶®‡ßá‡¶á‡•§ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡¶ï‡ßá ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶§‡ßá ‡¶¨‡¶≤‡ßÅ‡¶®‡•§</p>';
            }
        });
    </script>
</body>
</html>
